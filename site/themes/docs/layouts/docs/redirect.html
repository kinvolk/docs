<!DOCTYPE html>
<html>
  <head>
    {{- $redirectURL := default "" .Site.Params.redirect_url -}}
    <noscript>
      <meta http-equiv="refresh" content="0; url='{{ $redirectURL }}'" />
    </noscript>
    {{- if $redirectURL -}}
    <script>
      let redirectURL = '{{ $redirectURL }}';
      if (redirectURL[redirectURL.length - 1] !== '/') {
        redirectURL += '/';
      }
      const u = window.location.href;
      const ghSplit = u.split('github.io/')
      let repoName = '';
      if (ghSplit.length > 1) {
        repoName = ghSplit[1].split('/')[0] + '/';
      }
      let origin = window.location.origin;
      if (origin[origin.length - 1] === '/') {
        origin = origin.slice(0, -1);
      }
      const finalRedirect = u.replace(origin + '/' + repoName, redirectURL);
      if ((new URL(finalRedirect)).origin !== window.location.origin) {
        window.location.replace(finalRedirect);
      }
    </script>
    {{- end -}}
  </head>
  <body>
    {{- if $redirectURL -}}
    <p>Please follow <a href="{{ $redirectURL }}">this link</a>.</p>
    {{- else -}}
    <p>No redirect found. You either need to set up docs or content (edit content/_index.md).</p>
    {{- end -}}
  </body>
</html>
